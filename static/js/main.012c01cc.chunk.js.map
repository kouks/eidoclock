{"version":3,"sources":["img/morning.png","img/evening.png","img/black.png","sounds/eidolon.mp3","js/clock.js","App.js","index.js","img/day.png","img/night.png"],"names":["module","exports","__webpack_require__","p","lastSync","syncTimeout","expiryTime","hasLoaded","syncing","pad","n","toString","length","syncTimeFromFirebase","moment","now","valueOf","request","get","json","err","res","body","console","error","expiryDate","window","localStorage","setItem","getExpiryTime","getTimeUntilDay","getNextNightTimes","Array","from","x","i","map","calendar","isDay","getQuarter","slice","Math","floor","getFormattedTime","ms","total_s","total_m","msToHMS","timeUntilDay","getTimeUntilNextEvent","info","updateLocale","longDateFormat","LT","LTS","L","l","LL","ll","LLL","lll","LLLL","llll","Clock","props","react_default","a","createElement","className","day_night","time","NextNights","nights","index","key","About","href","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","backgrounds","morning","day","evening","night","black","state","wasNight","audio","Audio","cry","notifyDay","setState","play","notifyNight","background","backgroundImage","clearInterval","tickInterval","worldStateInterval","_this2","setInterval","tick","Push","create","icon","style","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.012c01cc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/morning.055d4c5c.png\";","module.exports = __webpack_public_path__ + \"static/media/evening.3d501728.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AAAAQ4AQAAAADAqPzuAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAHdElNRQfjARcNNDrZVDwMAAABE0lEQVR42u3BAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwKcB+OUAAfzhj/4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDEtMjNUMjE6NTU6NTUrMTE6MDDKhqxaAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAxLTIzVDAyOjUyOjU4KzExOjAwZHTGPAAAAD10RVh0RGVzY3JpcHRpb24AeyJEUlNBcHBOYW1lIiA6ICIiLCAiRFJTUHJvZmlsZU5hbWUiIDogIkRlc2t0b3AifQAmYXoAAAAWdEVYdFNvZnR3YXJlAEdFRk9SQ0UgU0hBUkW7qGCWAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/eidolon.a2979fb4.mp3\";","import moment from 'moment';\nimport request from 'request';\n\nvar lastSync = 0;\nvar syncTimeout = 60000;\nvar displayExpiryTime = 0;\nvar expiryTime = 0;\n\nvar hasLoaded = false;\nvar syncing = false;\n\n/* eslint-disable no-console */\n\nconsole.info('Clock of Eidolon v2.5.0');\n\nmoment.updateLocale('en', {\n    longDateFormat: {\n        LT: 'HH:mm A',\n        LTS: 'HH:mm:ss A',\n        L: 'MM/DD/YYYY',\n        l: 'M/D/YYYY',\n        LL: 'MMMM Do YYYY',\n        ll: 'MMM D YYYY',\n        LLL: 'MMMM Do YYYY LT',\n        lll: 'MMM D YYYY LT',\n        LLLL: 'dddd, MMMM Do YYYY LT',\n        llll: 'ddd, MMM D YYYY LT'\n    }\n});\n\nfunction pad(n) {\n    if (n.toString().length == 1)\n        return '0' + n.toString();\n    return n;\n}\n\nfunction syncTimeFromFirebase() {\n    if (syncing) return;\n    if (moment.now().valueOf() - lastSync >= syncTimeout || !expiryTime) {\n        syncing = true;\n        lastSync = moment.now().valueOf();\n        request.get('https://us-central1-eidoclock.cloudfunctions.net/getTime', { json: true }, function (err, res, body) {\n            if (err) console.error(err);\n            if (expiryTime != body.expiryDate) {\n                expiryTime = body.expiryDate;\n                window.localStorage.setItem('expiryTime', expiryTime);\n                hasLoaded = true;\n            }\n            syncing = false;\n        });\n    }\n}\n\n// Get the 'cetus syndicate mission expiry time' from Warframe's servers,\n//  or from a cached version\nfunction getExpiryTime() {\n    syncTimeFromFirebase();\n    if (moment.now().valueOf() >= expiryTime) {\n        displayExpiryTime = expiryTime + 150 * 60 * 1000;\n    } else {\n        displayExpiryTime = expiryTime;\n    }\n    return displayExpiryTime;\n}\n\n// Get the time until the next dawn\nfunction getTimeUntilDay() {\n    return getExpiryTime() - moment.now().valueOf();\n}\n\n// Get the time until the next dawn or dusk\nfunction getTimeUntilNextEvent() {\n    var timeUntilDay = getTimeUntilDay();\n    if (timeUntilDay > (50 * 60 * 1000))\n        return timeUntilDay - (50 * 60 * 1000);\n\n    return timeUntilDay;\n}\n\n// Convert a time to HH:MM:SS format for display\nfunction msToHMS(ms) {\n    var total_s = ms / 1000;\n    var total_m = total_s / 60;\n    var h = pad(Math.floor(total_m / 60));\n    var m = pad(Math.floor(total_m % 60));\n    var s = pad(Math.floor(total_s % 60));\n    return h + ':' + m + ':' + s;\n}\n\nfunction getNthNight(n) {\n    return getExpiryTime() - (50 * 60 * 1000) + (150 * 60 * 1000) * n;\n}\n\n// Return a list of the next n night times\nfunction getNextNightTimes(n) {\n    if (!hasLoaded) return [];\n    return Array.from({ length: n }, (x, i) => i)\n        .map(x => moment(getNthNight(x)).calendar());\n}\n\nfunction isDay() {\n    if (!hasLoaded) return true;\n    var timeUntilDay = getTimeUntilDay();\n    if (timeUntilDay > (50 * 60 * 1000))\n        return true;\n    return false;\n}\n\nfunction getQuarter() {\n    if (!hasLoaded) return 4;\n    var slice = Math.floor(15 * (getTimeUntilDay() / (150 * 60 * 1000)));\n    if (slice <= 4) return 3;\n    if (slice <= 7) return 2;\n    if (slice <= 13) return 1;\n    return 0;\n}\n\nfunction getFormattedTime() {\n    if (!hasLoaded) {\n        syncTimeFromFirebase();\n        return '--:--:--';\n    }\n    return msToHMS(getTimeUntilNextEvent());\n}\n\nexport { getFormattedTime, getNextNightTimes, isDay, getQuarter };","import React from 'react';\nimport Push from 'push.js';\nimport { getFormattedTime, getNextNightTimes, getQuarter, isDay } from './js/clock.js';\nimport { clearInterval } from 'timers';\nimport morning from './img/morning.png';\nimport day from './img/day.png';\nimport evening from './img/evening.png';\nimport night from './img/night.png';\nimport black from './img/black.png';\nimport cry from './sounds/eidolon.mp3';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.backgrounds = [\n            morning,\n            day,\n            evening,\n            night,\n            black\n        ];\n        this.state = {\n            time: getFormattedTime(),\n            nights: getNextNightTimes(10),\n            wasNight: false,\n        };\n        this.audio = new Audio(cry);\n    }\n\n    tick() {\n        if (!this.state.wasNight && !isDay()) {\n            // Just turned night - reeeeeeee\n            this.audio.play();\n            this.notifyNight();\n            this.setState({wasNight: true});\n        } else if (this.state.wasNight && isDay()) {\n            this.notifyDay();\n            this.setState({wasNight: false});\n        }\n        this.setState({\n            time: getFormattedTime(),\n            nights: getNextNightTimes(10),\n            background: {\n                backgroundImage: 'url(' + this.backgrounds[getQuarter()] + ')'\n            },\n            day_night: isDay() ? 'night' : 'day'\n        });\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.tickInterval);\n        clearInterval(this.worldStateInterval);\n    }\n\n    componentDidMount() {\n        this.tickInterval = setInterval(\n            () => this.tick(),\n            500\n        );\n    }\n\n    notifyDay() {\n        Push.create('It is day!', { icon: day });\n    }\n\n    notifyNight() {\n        Push.create('It is night!', { icon: night });\n    }\n\n\n    render() {\n        return (\n            <div className='container' style={this.state.background}>\n                <Clock time={this.state.time} day_night={this.state.day_night} />\n                <NextNights nights={this.state.nights} />\n                <About />\n            </div>\n        );\n    }\n}\n\nfunction Clock(props) {\n    return (\n        <div className='clock'>\n            <div className='clock-header'>Time until {props.day_night}</div>\n            {props.time}\n        </div>\n    );\n}\n\nfunction NextNights(props) {\n    // var opacities = props.nights.map((_, index) => {return {opacity: 0.5 * ((10-index)/10) + 0.5};});\n\n    return (\n        <div className='nights-container'>\n            <div className='nights-header'>\n                Upcoming Nights\n            </div>\n            <div className='nights'>\n                {\n                    props.nights.map(\n                        (time, index) => (\n                            // <div key={index} className='night-time' style={opacities[index]}>{time}</div>\n                            <div key={index} className='night-time'>{time}</div>\n                        )\n                    )\n                }\n            </div>\n        </div>\n    );\n}\n\nfunction About() {\n    return (\n        <div className='about'>\n            Made by <a href='https://reddit.com/u/lyneca'>/u/lyneca</a> and <a href='https://github.com/lyneca/eidoclock/graphs/contributors'>others</a><br/>\n            Hosted on <a href='https://github.com/lyneca/eidoclock'>GitHub</a><br/>\n        </div>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));","module.exports = __webpack_public_path__ + \"static/media/day.ae164e7a.png\";","module.exports = __webpack_public_path__ + \"static/media/night.3c4f2bfc.png\";"],"sourceRoot":""}